import base64
import sys

def run_base64_encoded(encoded_code):
      
        decoded_bytes = base64.b64decode(encoded_code)
    
        code = decoded_bytes.decode('utf-8')
   
        exec(code, globals())


if __name__ == "__main__":
    encoded_script = "aW1wb3J0IGh0dHB4CmltcG9ydCB0aW1lCmltcG9ydCByYW5kb20KaW1wb3J0IG9zCmltcG9ydCBqc29uICAsIHBvcnRhbG9ja2VyCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IsIGFzX2NvbXBsZXRlZAppbXBvcnQgY2xvdWRzY3JhcGVyCgpmcm9tIGNvbG9yYW1hIGltcG9ydCBpbml0LCBGb3JlLCBTdHlsZQppbml0KGF1dG9yZXNldD1UcnVlKQpvcy5zeXN0ZW0oImNvbG9yIDBBIikKb3Muc3lzdGVtKCJwaXAgaW5zdGFsbCBodHRweCBjbG91ZHNjcmFwZXIgcG9ydGFsb2NrZXIgY29sb3JhbWEiKQpvcy5zeXN0ZW0oImNscyIgaWYgb3MubmFtZSA9PSAibnQiIGVsc2UgImNsZWFyIikKb3Muc3lzdGVtKCJjaGNwIDY1MDAxIikKb3Muc3lzdGVtKCJ0aXRsZSBNYWRlIGJ5IC0gU285YSIpCkJBTk5FUiA9IHIiIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKVlyDilojilojilZfilojilojilojilojilojilojilojilZfilojilojilojilZcgICDilojilojilZfilojilojilojilojilojilojilZcgICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVlwogICAgICAgICAgICAgICAgICAgICAgICAgICAg4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4paI4paI4pWXICDilojilojilZHilojilojilZTilZDilZDilojilojilZcgICAg4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4pWQ4paI4paI4pWX4pWa4pWQ4pWQ4paI4paI4pWU4pWQ4pWQ4pWdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICDilojilojilojilojilojilZcgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKVlyAg4paI4paI4pWU4paI4paI4pWXIOKWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWRICAgIOKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWiOKWiOKVkSAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAg4paI4paI4pWU4pWQ4pWQ4pWdICDilojilojilZTilZDilZDilojilojilZfilojilojilZHilojilojilZTilZDilZDilZ0gIOKWiOKWiOKVkeKVmuKWiOKWiOKVl+KWiOKWiOKVkeKWiOKWiOKVkSAg4paI4paI4pWRICAgIOKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVkSAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAg4paI4paI4pWRICAgICDilojilojilZEgIOKWiOKWiOKVkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVkSDilZrilojilojilojilojilZHilojilojilojilojilojilojilZTilZ0gICAg4paI4paI4paI4paI4paI4paI4pWU4pWd4pWa4paI4paI4paI4paI4paI4paI4pWU4pWdICAg4paI4paI4pWRICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZrilZDilZ0gICAgIOKVmuKVkOKVnSAg4pWa4pWQ4pWd4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWdICDilZrilZDilZDilZDilZ3ilZrilZDilZDilZDilZDilZDilZ0gICAgIOKVmuKVkOKVkOKVkOKVkOKVkOKVnSAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWdICAgIOKVmuKVkOKVnSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiIiIgoKTE9HT19TVEFSVF9DT0xPUiA9ICgyNTUsIDAsIDApICAgIApMT0dPX0VORF9DT0xPUiA9ICgxMDIsIDExLCAxOTMpICAgCk1FTlVfQ09MT1IgPSBGb3JlLk1BR0VOVEEKT1BUSU9OX0NPTE9SID0gRm9yZS5SRUQKUFJPTVBUX0NPTE9SID0gRm9yZS5MSUdIVEdSRUVOX0VYCgpkZWYgcHJpbnRfbG9nbygpOgogICAgZm9yIGxpbmUgaW4gQkFOTkVSLnNwbGl0bGluZXMoKToKICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGxpbmUpCgpkZWYgcHJpbnRfZ3JhZGllbnRfbGluZSh0ZXh0LCBzdGFydF9jb2xvcj1MT0dPX1NUQVJUX0NPTE9SLCBlbmRfY29sb3I9TE9HT19FTkRfQ09MT1IpOgogICAgaWYgbm90IHRleHQuc3RyaXAoKToKICAgICAgICBwcmludCgpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIHN0ZXBzID0gbGVuKHRleHQpIC0gMSBpZiBsZW4odGV4dCkgPiAxIGVsc2UgMQogICAgcl9zdGFydCwgZ19zdGFydCwgYl9zdGFydCA9IHN0YXJ0X2NvbG9yCiAgICByX2VuZCwgZ19lbmQsIGJfZW5kID0gZW5kX2NvbG9yCgogICAgZ3JhZGllbnRfdGV4dCA9ICIiCiAgICBmb3IgaSwgY2hhciBpbiBlbnVtZXJhdGUodGV4dCk6CiAgICAgICAgciA9IGludChyX3N0YXJ0ICsgKHJfZW5kIC0gcl9zdGFydCkgKiAoaSAvIHN0ZXBzKSkKICAgICAgICBnID0gaW50KGdfc3RhcnQgKyAoZ19lbmQgLSBnX3N0YXJ0KSAqIChpIC8gc3RlcHMpKQogICAgICAgIGIgPSBpbnQoYl9zdGFydCArIChiX2VuZCAtIGJfc3RhcnQpICogKGkgLyBzdGVwcykpCiAgICAgICAgZ3JhZGllbnRfdGV4dCArPSBmJ1wwMzNbMzg7Mjt7cn07e2d9O3tifW17Y2hhcn0nCgogICAgZ3JhZGllbnRfdGV4dCArPSBTdHlsZS5SRVNFVF9BTEwKICAgIHByaW50KGdyYWRpZW50X3RleHQpCndpdGggb3BlbigiY29va2llLnR4dCIsICJyIikgYXMgZjoKICAgIGNvb2tpZSA9IGYucmVhZCgpLnN0cmlwKCkKaWYgbm90IGNvb2tpZToKICAgIHByaW50X2dyYWRpZW50X2xpbmUoIkNvb2tpZSBub3QgZm91bmQgaW4gY29va2llLnR4dCIpCiAgICB0aW1lLnNsZWVwKDMpCiAgICBwcmludF9ncmFkaWVudF9saW5lKCJQbGVhc2UgYWRkIHlvdXIgY29va2llIHRvIGNvb2tpZS50eHQiKQpjaGVja19kZWxheSA9IDIKbWF4X3RocmVhZHMgPSA1CmRlbGF5ID0gMgpwcm9jZXNzZWRfcGxheWVycyA9IHNldCgpCnJlcXVlc3RlZF9wbGF5ZXJzID0gc2V0KCkgClBFTkRJTkdfUkVRVUVTVFNfRklMRSA9ICJwZW5kaW5nX2lkcy50eHQiICAKCmRlZiBnZXRfbmV3X2FjY2Vzc190b2tlbigpOgogICAgCgogICAgZ2xvYmFsIGFjY2Vzc190b2tlbiwgaGVhZGVycwogICAgc2NyYXBlciA9IGNsb3Vkc2NyYXBlci5jcmVhdGVfc2NyYXBlcigpCiAgICBoZWFkZXJzID0gewogICAgICAgICJDb29raWUiOiBjb29raWUsCiAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDYuMDsgTmV4dXMgNSBCdWlsZC9NUkE1OE4pIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMzUuMC4wLjAgTW9iaWxlIFNhZmFyaS81MzcuMzYiLAogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgogICAgfQogICAgcmVzcG9uc2UgPSBzY3JhcGVyLmdldCgiaHR0cHM6Ly9yZWMubmV0L2FwaS9hdXRoL3Nlc3Npb24iLCBoZWFkZXJzPWhlYWRlcnMpCiAgICBpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgYWNjZXNzX3Rva2VuID0gcmVzcG9uc2UuanNvbigpLmdldCgiYWNjZXNzVG9rZW4iKQogICAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGYnQmVhcmVyIHthY2Nlc3NfdG9rZW59JwogICAgICAgIHJldHVybiBhY2Nlc3NfdG9rZW4KICAgIGVsaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gNDAzOgogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoIjQwMyBlcnJvciB0cnlpbmcgYWdhaW4hIikKICAgICAgICByZXR1cm4gZ2V0X25ld19hY2Nlc3NfdG9rZW4oKQogICAgcmV0dXJuIE5vbmUKCnJvb21faWRzID0gWwogICAgMTcwMTI2LCAKICAgIDE3MDEzMCwKICAgIDE3MDEyNywKICAgIDE3MDEzNCwKICAgIDE3MDEzMiwKICAgIDE3MDE0NywKICAgIDE3MDE0MQpdCgphY2Nlc3NfdG9rZW4gPSBnZXRfbmV3X2FjY2Vzc190b2tlbigpCmlmIG5vdCBhY2Nlc3NfdG9rZW46CiAgICBwcmludF9ncmFkaWVudF9saW5lKCJGYWlsZWQgdG8gZ2V0IGFjY2VzcyB0b2tlbiIpCiAgICBhY2Nlc3NfdG9rZW4oKQoKaGVhZGVycyA9IHsKICAgICdBdXRob3JpemF0aW9uJzogZidCZWFyZXIge2FjY2Vzc190b2tlbn0nLAogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKfQoKZGVmIGxvYWRfcGVuZGluZ19pZHMoKToKICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4oUEVORElOR19SRVFVRVNUU19GSUxFLCAiciIpIGFzIGY6CiAgICAgICAgICAgIHJldHVybiBzZXQobGluZS5zdHJpcCgpIGZvciBsaW5lIGluIGYgaWYgbGluZS5zdHJpcCgpKQogICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgIHJldHVybiBzZXQoKQoKZGVmIHNhdmVfcGVuZGluZ19pZChwbGF5ZXJfaWQpOgogICAgd2l0aCBvcGVuKFBFTkRJTkdfUkVRVUVTVFNfRklMRSwgImEiKSBhcyBmOgogICAgICAgIHBvcnRhbG9ja2VyLmxvY2soZiwgcG9ydGFsb2NrZXIuTE9DS19FWCkKICAgICAgICB0cnk6CiAgICAgICAgICAgIGYud3JpdGUoZiJ7cGxheWVyX2lkfVxuIikKICAgICAgICAgICAgZi5mbHVzaCgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoZGVsYXkpCiAgICAgICAgZmluYWxseToKICAgICAgICAgICAgcG9ydGFsb2NrZXIudW5sb2NrKGYpCgpkZWYgcmVtb3ZlX3BlbmRpbmdfaWQocGxheWVyX2lkKToKICAgIHBlbmRpbmdfaWRzID0gbG9hZF9wZW5kaW5nX2lkcygpCiAgICBwZW5kaW5nX2lkcy5kaXNjYXJkKHN0cihwbGF5ZXJfaWQpKQogICAgd2l0aCBvcGVuKFBFTkRJTkdfUkVRVUVTVFNfRklMRSwgInciKSBhcyBmOgogICAgICAgIGYud3JpdGUoIlxuIi5qb2luKHBlbmRpbmdfaWRzKSkKCmRlZiBkZWxldGVfZnJpZW5kX3JlcXVlc3QocGxheWVyX2lkKToKCiAgICB1cmwgPSBmJ2h0dHBzOi8vYXBpLnJlYy5uZXQvYXBpL3JlbGF0aW9uc2hpcHMvdjMve3BsYXllcl9pZH0nCiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSBodHRweC5kZWxldGUodXJsLCBoZWFkZXJzPWhlYWRlcnMsIHRpbWVvdXQ9MTApCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBpZiBjaGVja19yZWxhdGlvbnNoaXBfc3RhdHVzKHBsYXllcl9pZCkgPT0gMzoKICAgICAgICAgICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJBbHJlYWR5IGZyaWVuZHMgd2l0aCB7cGxheWVyX2lkfSwgc2tpcHBpbmcgZGVsZXRpb24iKQogICAgICAgICAgICAgICAgcmVtb3ZlX3BlbmRpbmdfaWQocGxheWVyX2lkKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIGVsaWYgY2hlY2tfcmVsYXRpb25zaGlwX3N0YXR1cyhwbGF5ZXJfaWQpID09IDE6CiAgICAgICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgZnJpZW5kIHJlcXVlc3QgdG8ge3BsYXllcl9pZH0iKQogICAgICAgICAgICAgICAgcmVtb3ZlX3BlbmRpbmdfaWQocGxheWVyX2lkKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJSZXF1ZXN0IHRvIHtwbGF5ZXJfaWR9IHdhcyBub3Qgc2VudCwgc2tpcHBpbmcgZGVsZXRpb24iKQogICAgICAgICAgICAgICAgcmVtb3ZlX3BlbmRpbmdfaWQocGxheWVyX2lkKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDQwMToKICAgICAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZSgiNDAxIGVycm9yLCBnZXR0aW5nIG5ldyB0b2tlbiBhbmQgcmV0cnlpbmcuLi4iKQogICAgICAgICAgICBnZXRfbmV3X2FjY2Vzc190b2tlbigpCiAgICAgICAgICAgIHJldHVybiBkZWxldGVfZnJpZW5kX3JlcXVlc3QocGxheWVyX2lkKQogICAgICAgIGVsaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gNDI5OgogICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKCJSYXRlIGxpbWl0IGhpdCwgd2FpdGluZyA1IHNlY29uZHMiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgIHJldHVybiBkZWxldGVfZnJpZW5kX3JlcXVlc3QocGxheWVyX2lkKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIAogICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiRmFpbGVkIHRvIGRlbGV0ZSByZXF1ZXN0IHRvIHtwbGF5ZXJfaWR9IChTdGF0dXM6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0pIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZShyZXNwb25zZS50ZXh0ICwgcmVzcG9uc2Uuc3RhdHVzX2NvZGUpCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gNDAxOgogICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKCI0MDEgZXJyb3IsIGdldHRpbmcgbmV3IHRva2VuIGFuZCByZXRyeWluZy4uLiIpCiAgICAgICAgICAgIGdldF9uZXdfYWNjZXNzX3Rva2VuKCkKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZV9mcmllbmRfcmVxdWVzdChwbGF5ZXJfaWQpCiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZShmIkVycm9yIGRlbGV0aW5nIHJlcXVlc3QgdG8ge3BsYXllcl9pZH06IHtzdHIoZSl9IikKICAgICAgICByZXR1cm4gRmFsc2UKCmRlZiBjaGVja19yZWxhdGlvbnNoaXBfc3RhdHVzKHBsYXllcl9pZCk6CiAgIAogICAgdXJsID0gZiJodHRwczovL2FwaS5yZWMubmV0L2FwaS9yZWxhdGlvbnNoaXBzL3YxL3JlbGF0aW9uc2hpcHdpdGgve3BsYXllcl9pZH0iCiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSBodHRweC5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcnMsIHRpbWVvdXQ9MTApCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgIGlmIGRhdGEgaXMgTm9uZTogIAogICAgICAgICAgICAgICAgcmV0dXJuIDAgIAogICAgICAgICAgICByZXR1cm4gZGF0YS5nZXQoIlJlbGF0aW9uc2hpcFR5cGUiLCAwKQogICAgICAgIGVsaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gNDAxOgogICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKCI0MDEgZXJyb3IsIGdldHRpbmcgbmV3IHRva2VuIGFuZCByZXRyeWluZy4uLiIpCiAgICAgICAgICAgIGdldF9uZXdfYWNjZXNzX3Rva2VuKCkKICAgICAgICAgICAgcmV0dXJuIGNoZWNrX3JlbGF0aW9uc2hpcF9zdGF0dXMocGxheWVyX2lkKQogICAgICAgIGVsaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gNDI5OgogICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKCJSYXRlIGxpbWl0IGhpdCwgd2FpdGluZyAzIHNlY29uZHMiKQogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgIHJldHVybiBjaGVja19yZWxhdGlvbnNoaXBfc3RhdHVzKHBsYXllcl9pZCkKICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiU3RhdHVzIGNoZWNrIGZhaWxlZCBmb3Ige3BsYXllcl9pZH0gKEhUVFAge3Jlc3BvbnNlLnN0YXR1c19jb2RlfSkiKQogICAgICAgIHJldHVybiAtMSAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiRXJyb3IgY2hlY2tpbmcgcmVsYXRpb25zaGlwIHdpdGgge3BsYXllcl9pZH06IHtzdHIoZSl9IikKICAgICAgICByZXR1cm4gLTEKCmRlZiBzZW5kX2ZyaWVuZF9yZXF1ZXN0KHBsYXllcl9pZCk6CiAgICAKICAgIGlmIHBsYXllcl9pZCBpbiBwcm9jZXNzZWRfcGxheWVyczoKICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAKICAgIHJlbGF0aW9uc2hpcCA9IGNoZWNrX3JlbGF0aW9uc2hpcF9zdGF0dXMocGxheWVyX2lkKQogICAgCiAgICBpZiByZWxhdGlvbnNoaXAgPT0gLTE6IAogICAgICAgIHJldHVybiBGYWxzZQogICAgZWxpZiByZWxhdGlvbnNoaXAgPT0gMzogCiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZShmIkFscmVhZHkgZnJpZW5kcyB3aXRoIHtwbGF5ZXJfaWR9LCBza2lwcGluZyIpCiAgICAgICAgcHJvY2Vzc2VkX3BsYXllcnMuYWRkKHBsYXllcl9pZCkKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGVsaWYgcmVsYXRpb25zaGlwID09IDE6IAogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJQZW5kaW5nIHJlcXVlc3QgYWxyZWFkeSBleGlzdHMgd2l0aCB7cGxheWVyX2lkfSwgc2tpcHBpbmciKQogICAgICAgIHByb2Nlc3NlZF9wbGF5ZXJzLmFkZChwbGF5ZXJfaWQpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgCiAgICB1cmwgPSBmJ2h0dHBzOi8vYXBpLnJlYy5uZXQvYXBpL3JlbGF0aW9uc2hpcHMvdjMve3BsYXllcl9pZH0nCiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSBodHRweC5wb3N0KHVybCwgaGVhZGVycz1oZWFkZXJzLCB0aW1lb3V0PTEwKQogICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgaWYgY2hlY2tfcmVsYXRpb25zaGlwX3N0YXR1cyhwbGF5ZXJfaWQpID09IDM6CiAgICAgICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiQWxyZWFkeSBmcmllbmRzIHdpdGgge3BsYXllcl9pZH0sIHNraXBwaW5nIikKICAgICAgICAgICAgICAgIHJlbW92ZV9wZW5kaW5nX2lkKHBsYXllcl9pZCkKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiU2VudCBmcmllbmQgcmVxdWVzdCB0byB7cGxheWVyX2lkfSIpCiAgICAgICAgICAgIG9zLnN5c3RlbShmInRpdGxlIFNlbnQgZnJpZW5kIHJlcXVlc3QgdG8gW3twbGF5ZXJfaWR9XSIpCiAgICAgICAgICAgIHJlcXVlc3RlZF9wbGF5ZXJzLmFkZChwbGF5ZXJfaWQpCiAgICAgICAgICAgIHNhdmVfcGVuZGluZ19pZChwbGF5ZXJfaWQpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSA0MDE6CiAgICAgICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoIjQwMSBlcnJvciwgZ2V0dGluZyBuZXcgdG9rZW4gYW5kIHJldHJ5aW5nLi4uIikKICAgICAgICAgICAgZ2V0X25ld19hY2Nlc3NfdG9rZW4oKQogICAgICAgICAgICByZXR1cm4gc2VuZF9mcmllbmRfcmVxdWVzdChwbGF5ZXJfaWQpCiAgICAgICAgZWxpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSA0MDA6CiAgICAgICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoIkhpdCBtYXggcGVuZGluZyBmcmllbmQgcmVxdWVzdHMgLSBzdGFydGluZyBjbGVhbnVwIikKICAgICAgICAgICAgb3Muc3lzdGVtKCJ0aXRsZSBbL10gc3RhcnRpbmcgY2xlYW51cCIpCiAgICAgICAgICAgIGlmIGNsZWFyX3BlbmRpbmdfcmVxdWVzdHMoKToKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZF9mcmllbmRfcmVxdWVzdChwbGF5ZXJfaWQpCiAgICAgICAgZWxpZiByZXNwb25zZS5zdGF0dXNfY29kZSA9PSA0Mjk6CiAgICAgICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoIlJhdGUgbGltaXQgaGl0LCB3YWl0aW5nIDUgc2Vjb25kcyIpCiAgICAgICAgICAgIG9zLnN5c3RlbSgidGl0bGUgWy9dIFJhdGUgbGltaXQgaGl0LCB3YWl0aW5nIDUgc2Vjb25kcyIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkKICAgICAgICAgICAgcmV0dXJuIHNlbmRfZnJpZW5kX3JlcXVlc3QocGxheWVyX2lkKQogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJGYWlsZWQgdG8gc2VuZCB0byB7cGxheWVyX2lkfSAoU3RhdHVzOiB7cmVzcG9uc2Uuc3RhdHVzX2NvZGV9KSIpCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gNDAwOgogICAgICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKCJmYWxkIGFjYyBkZWxldGluZyIpCiAgICAgICAgICAgIHJlbW92ZV9wZW5kaW5nX2lkKHBsYXllcl9pZCkKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwYXNzCiAgICAgICAgcmV0dXJuIEZhbHNlCgpkZWYgY2hlY2tfcmVxdWVzdF9zdGF0dXMocGxheWVyX2lkKToKIAogICAgdGltZS5zbGVlcChjaGVja19kZWxheSkgCiAgICByZWxhdGlvbnNoaXAgPSBjaGVja19yZWxhdGlvbnNoaXBfc3RhdHVzKHBsYXllcl9pZCkKICAgIGlmIHJlbGF0aW9uc2hpcCA9PSAzOgogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJTdWNjZXNzISB7cGxheWVyX2lkfSBhY2NlcHRlZCB0aGUgcmVxdWVzdCIpCiAgICAgICAgb3Muc3lzdGVtKGYidGl0bGUgU3VjY2VzcyEge3BsYXllcl9pZH0gYWNjZXB0ZWQgdGhlIHJlcXVlc3QiKQogICAgICAgIHJlbW92ZV9wZW5kaW5nX2lkKHBsYXllcl9pZCkKICAgIGVsaWYgcmVsYXRpb25zaGlwID09IDE6CiAgICAgICAgZGVsZXRlX2ZyaWVuZF9yZXF1ZXN0KHBsYXllcl9pZCkgIAogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJSZXF1ZXN0IHN0aWxsIHBlbmRpbmcgd2l0aCB7cGxheWVyX2lkfSwgZGVsZXRpbmcuLi4iKQogICAgZWxzZToKICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiTm8gcmVzcG9uc2UgZnJvbSB7cGxheWVyX2lkfSIpCiAgICAgICAgcmVtb3ZlX3BlbmRpbmdfaWQocGxheWVyX2lkKQogICAgcHJvY2Vzc2VkX3BsYXllcnMuYWRkKHBsYXllcl9pZCkKCmRlZiBjbGVhcl9wZW5kaW5nX3JlcXVlc3RzKCk6CiAgCiAgICBwZW5kaW5nX2lkcyA9IGxvYWRfcGVuZGluZ19pZHMoKQogICAgaWYgbm90IHBlbmRpbmdfaWRzOgogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoIk5vIHBlbmRpbmcgcmVxdWVzdHMgdG8gY2xlYXIiKQogICAgICAgIHJldHVybiBGYWxzZQogICAgCiAgICBwcmludF9ncmFkaWVudF9saW5lKGYiRm91bmQgW3tsZW4ocGVuZGluZ19pZHMpfV0gcGVuZGluZyByZXF1ZXN0cyB0byBjbGVhciIpCiAgICAKICAgIHN1Y2Nlc3NfY291bnQgPSAwCiAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0xKSBhcyBleGVjdXRvcjoKICAgICAgICBmdXR1cmVzID0gW2V4ZWN1dG9yLnN1Ym1pdChkZWxldGVfZnJpZW5kX3JlcXVlc3QsIHBpZCkgZm9yIHBpZCBpbiBwZW5kaW5nX2lkc10KICAgICAgICBmb3IgZnV0dXJlIGluIGFzX2NvbXBsZXRlZChmdXR1cmVzKToKICAgICAgICAgICAgaWYgZnV0dXJlLnJlc3VsdCgpOgogICAgICAgICAgICAgICAgc3VjY2Vzc19jb3VudCArPSAxCiAgICAKICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJDbGVhcmVkIFt7c3VjY2Vzc19jb3VudH1dIHBlbmRpbmcgcmVxdWVzdHMiKQogICAgb3Muc3lzdGVtKGYidGl0bGUgY2xlYXJkIFt7c3VjY2Vzc19jb3VudH1dIHBlbmRpbmcgcmVxdWVzdHMhIikKICAgIHJldHVybiBzdWNjZXNzX2NvdW50ID4gMAoKZGVmIGZldGNoX3BsYXllcl9pZHMocm9vbV9pZCk6CiAKICAgIHJvb21faW1hZ2VzX3VybCA9IGYnaHR0cHM6Ly9hcGltLnJlYy5uZXQvYXBpcy9hcGkvaW1hZ2VzL3Y0L3Jvb20ve3Jvb21faWR9P3NraXA9MCZ0YWtlPTQwJmZpbHRlcj0xJnNvcnQ9MCcKICAgIHRyeToKICAgICAgICByZXNwb25zZSA9IGh0dHB4LmdldChyb29tX2ltYWdlc191cmwsIHRpbWVvdXQ9MTApCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBwbGF5ZXJfaWRzID0gc2V0KCkKICAgICAgICAgICAgZm9yIGltYWdlIGluIHJlc3BvbnNlLmpzb24oKToKICAgICAgICAgICAgICAgIHBsYXllcl9pZHMuYWRkKGltYWdlWyJQbGF5ZXJJZCJdKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAiVGFnZ2VkUGxheWVySWRzIiBpbiBpbWFnZSBhbmQgaW1hZ2VbIlRhZ2dlZFBsYXllcklkcyJdOgogICAgICAgICAgICAgICAgICAgIGZvciB0YWdnZWRfaWQgaW4gaW1hZ2VbIlRhZ2dlZFBsYXllcklkcyJdOgogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfaWRzLmFkZCh0YWdnZWRfaWQpCiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gbGlzdChwbGF5ZXJfaWRzKSBpZiBwbGF5ZXJfaWRzIGVsc2UgW10KICAgICAgICBlbGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDQwMToKICAgICAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZSgiNDAxIGVycm9yLCBnZXR0aW5nIG5ldyB0b2tlbiBhbmQgcmV0cnlpbmcuLi4iKQogICAgICAgICAgICBnZXRfbmV3X2FjY2Vzc190b2tlbigpCiAgICAgICAgICAgIHJldHVybiBmZXRjaF9wbGF5ZXJfaWRzKHJvb21faWQpCiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZShmIkZhaWxlZCB0byBmZXRjaCBwbGF5ZXJzIGZyb20gcm9vbSB7cm9vbV9pZH0gKFN0YXR1czoge3Jlc3BvbnNlLnN0YXR1c19jb2RlfSkiKQogICAgICAgIHJldHVybiBbXQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJFcnJvciBmZXRjaGluZyBwbGF5ZXJzIGZyb20gcm9vbSB7cm9vbV9pZH06IHtzdHIoZSl9IikKICAgICAgICByZXR1cm4gW10KCmRlZiBwcm9jZXNzX3Jvb20ocm9vbV9pZCk6CiAgCiAgICBwcmludF9ncmFkaWVudF9saW5lKGYiXG5Qcm9jZXNzaW5nIHJvb206IHtyb29tX2lkfSIpCiAgICBwbGF5ZXJfaWRzID0gZmV0Y2hfcGxheWVyX2lkcyhyb29tX2lkKQogICAgCiAgICBpZiBub3QgcGxheWVyX2lkczoKICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiTm8gcGxheWVycyBmb3VuZCBpbiByb29tIHtyb29tX2lkfSIpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJGb3VuZCB7bGVuKHBsYXllcl9pZHMpfSBwbGF5ZXJzIChpbmNsdWRpbmcgdGFnZ2VkKSBpbiByb29tIHtyb29tX2lkfSIpCiAgICByYW5kb20uc2h1ZmZsZShwbGF5ZXJfaWRzKQogICAgCiAgIAogICAgd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9bWF4X3RocmVhZHMpIGFzIGV4ZWN1dG9yOgogICAgICAgIGZ1dHVyZXMgPSBbXQogICAgICAgIGZvciBwaWQgaW4gcGxheWVyX2lkczoKICAgICAgICAgICAgaWYgcGlkIG5vdCBpbiBwcm9jZXNzZWRfcGxheWVyczoKICAgICAgICAgICAgICAgIGZ1dHVyZXMuYXBwZW5kKGV4ZWN1dG9yLnN1Ym1pdChzZW5kX2ZyaWVuZF9yZXF1ZXN0LCBwaWQpKQogICAgICAgIAogICAgICAgIGZvciBmdXR1cmUgaW4gYXNfY29tcGxldGVkKGZ1dHVyZXMpOgogICAgICAgICAgICBmdXR1cmUucmVzdWx0KCkgIAogICAgCiAgCiAgICBpZiByZXF1ZXN0ZWRfcGxheWVyczoKICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKGYiXG5XYWl0aW5nIFsyMF0gc2Vjb25kcyBiZWZvcmUgY2hlY2tpbmcgcmVxdWVzdCBzdGF0dXNlcy4uLiIpCiAgICAgICAgdGltZS5zbGVlcCgyMCkgIAogICAgICAgIHByaW50X2dyYWRpZW50X2xpbmUoZiJcbkNoZWNraW5nIHN0YXR1cyBvZiB7bGVuKHJlcXVlc3RlZF9wbGF5ZXJzKX0gcmVxdWVzdHMuLi4iKQogICAgICAgIHdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTEpIGFzIGV4ZWN1dG9yOgogICAgICAgICAgICBmdXR1cmVzID0gW2V4ZWN1dG9yLnN1Ym1pdChjaGVja19yZXF1ZXN0X3N0YXR1cywgcGlkKSBmb3IgcGlkIGluIHJlcXVlc3RlZF9wbGF5ZXJzXQogICAgICAgICAgICBmb3IgZnV0dXJlIGluIGFzX2NvbXBsZXRlZChmdXR1cmVzKToKICAgICAgICAgICAgICAgIGZ1dHVyZS5yZXN1bHQoKQogICAgICAgIHJlcXVlc3RlZF9wbGF5ZXJzLmNsZWFyKCkgIAoKZGVmIHByb2Nlc3Nfcm9vbXMoKToKICAKICAgIHdoaWxlIFRydWU6CiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZSgiXG49PT0gU3RhcnRpbmcgbmV3IHByb2Nlc3Npbmcgcm91bmQgPT09IikKICAgICAgICBzdGFydF90aW1lID0gdGltZS50aW1lKCkKICAgICAgICAKICAgICAKICAgICAgICBmb3Igcm9vbV9pZCBpbiByYW5kb20uc2FtcGxlKHJvb21faWRzLCBsZW4ocm9vbV9pZHMpKToKICAgICAgICAgICAgcHJvY2Vzc19yb29tKHJvb21faWQpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoNSkgIAogICAgICAgIAogICAgICAgIGVsYXBzZWQgPSB0aW1lLnRpbWUoKSAtIHN0YXJ0X3RpbWUKICAgICAgICBzbGVlcF90aW1lID0gbWF4KDEwIC0gZWxhcHNlZCwgNDApCiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZShmIlxuQ29tcGxldGVkIHJvdW5kIGluIHtlbGFwc2VkOi4xZn1zLiBXYWl0aW5nIHtzbGVlcF90aW1lOi4xZn1zLi4uIikKICAgICAgICB0aW1lLnNsZWVwKHNsZWVwX3RpbWUpCmRlZiBsb2dpbigpOgogICAgb3Muc3lzdGVtKCJjbHMiIGlmIG9zLm5hbWUgPT0gIm50IiBlbHNlICJjbGVhciIpCiAgICB1c2VybmFtZSA9IGlucHV0KCJFbnRlciB5b3VyIHVzZXJuYW1lOiAiKQogICAgcGFzc3dvcmQgPSBpbnB1dCgiRW50ZXIgeW91ciBwYXNzd29yZDogIikKICAgIHByaW50X2dyYWRpZW50X2xpbmUoIkxvZ2dpbmcgaW4uLi4iKQogICAgaWYgbm90IHVzZXJuYW1lIG9yIG5vdCBwYXNzd29yZDoKICAgICAgICBwcmludF9ncmFkaWVudF9saW5lKCJVc2VybmFtZSBhbmQgcGFzc3dvcmQgY2Fubm90IGJlIGVtcHR5LiIpCiAgICAgICAgcmV0dXJuCiAgICBpZiB1c2VybmFtZSA9PSAic285YSIgYW5kIHBhc3N3b3JkID09ICJhZG1pbiI6CiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZSgiTG9naW4gc3VjY2Vzc2Z1bCEiKQogICAgICAgIG1haW4oKQogICAgZWxpZiB1c2VybmFtZSA9PSAiUnlhbiIgYW5kIHBhc3N3b3JkID09ICJyeWFuMjMxNCI6CiAgICAgICAgcHJpbnRfZ3JhZGllbnRfbGluZSgiTG9naW4gc3VjY2Vzc2Z1bCEiKQogICAgICAgIG1haW4oKQoKZGVmIG1haW4oKToKICAgIG9zLnN5c3RlbSgiY2xzIiBpZiBvcy5uYW1lID09ICJudCIgZWxzZSAiY2xlYXIiKQogICAgcHJpbnRfZ3JhZGllbnRfbGluZShCQU5ORVIpCiAgICB1cmwgPSAiaHR0cHM6Ly9hY2NvdW50cy5yZWMubmV0L2FjY291bnQvbWUiCiAgICBoZWFkZXJzID0gewogICAgICAgICJhdXRob3JpemF0aW9uIjogZiJCZWFyZXIge2FjY2Vzc190b2tlbn0iLAogICAgfQogICAgcmVzcG9uc2UgPSAgaHR0cHguZ2V0KHVybCwgaGVhZGVycz1oZWFkZXJzKQogICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgIHVzZXIgPSByZXNwb25zZS5qc29uKCkKICAgICAgICB1c2VybmFtZSA9IHVzZXIuZ2V0KCJ1c2VybmFtZSIsICJVbmtub3duIFVzZXIiKQogICAgcHJpbnRfZ3JhZGllbnRfbGluZShmIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilZRMb2dpbiBhcyA+ICBAe3VzZXJuYW1lfeKVlyIpCiAgICBwcmludF9ncmFkaWVudF9saW5lKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeKVkSIpCiAgICBwcmludF9ncmFkaWVudF9saW5lKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRICAgUHJlc3MgRW50ZXIgdG8gc3RhcnQgIOKVkSIpCiAgICBwcmludF9ncmFkaWVudF9saW5lKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdIikKICAgIGlucHV0KCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIpCiAgICBwcmludF9ncmFkaWVudF9saW5lKCJTdGFydGluZyBzY3JpcHQuLi4iKQogICAgb3Muc3lzdGVtKCJjbHMiIGlmIG9zLm5hbWUgPT0gIm50IiBlbHNlICJjbGVhciIpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBwcm9jZXNzX3Jvb21zKCkKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgICAgICBsb2dpbigp"
    run_base64_encoded(encoded_script)
